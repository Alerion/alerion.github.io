<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Организация перевода документации на основе Sphinx и Gettext</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen.css">
</head>
<body class="list">
	<header class="caption">
		<h1>Организация перевода документации на основе Sphinx и Gettext</h1>

		<p>Дмитрий Косточко</p>
	</header>

	<section class="slide"><div>
		<h2>Организация перевода документации на основе Sphinx и Gettext</h2>

		<p>Дмитрий Косточко</p>
	</div></section>

	<section class="slide"><div>
		<h2>Где найти</h2>

		<ul>
			<li><a href="http://djbook.ru/">http://djbook.ru/</a></li>
			<li><a href="https://github.com/Alerion/django_documentation">https://github.com/Alerion/django_documentation</a></li>
			<li><a href="http://sphinx-doc.org/">http://sphinx-doc.org/</a></li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Важность документации</h2>

		<figure>
			<blockquote>
				<p>Документация - как секс: если она хороша, то это очень хорошо; а если она плохаЯ, то это ВСЁ ЖЕ лучше чем ничего.</p>
			</blockquote>
			<figcaption>Дик Брэндон</figcaption>
		</figure>
	</div></section>

	<section class="slide"><div>
		<h2>Инструменты для представления и организации документации</h2>

		<ul>
			<li>reStructuredText, Markdown, docbook</li>
			<li>Wiki, Confluence</li>
			<li>Google Docs</li>
			<li>Комментарии в коде</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Требования к инструменту для создания документации</h2>

		<ul>
			<li>Текстовой формат хранения (для удобной работы в VCS).</li>
			<li>Возможность оформления и стилизации.</li>
			<li>Возможность сборки в различные форматы.</li>
			<li>Перекрестные ссылки, DRY.</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Документация Django</h2>

		<ul>
			<li>Считается большим плюсом Django.</li>
			<li>Объёмная. В PDF 1300+ страниц.</li>
			<li>Постоянно развивается.</li>
			<li>Много ньюансов описано за последние годы.</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>С чего все началось</h2>

		Перевод "The Django Book" для Django 1.0.<br>
		<a href="http://www.djangobook.com/">http://www.djangobook.com/</a>
	</div></section>

	<section class="slide"><div>
		<h2>Docbook</h2>

		<pre style="font-size: 0.70em; line-height: normal;">
			<code>&lt;chapter lang="ru" id="&amp;BASEID;"&gt;</code>
			<code>  &lt;title id="&amp;BASEID;.title"&gt;Введение в Django&lt;/title&gt;</code>
			<code>  &lt;section id="&amp;BASEID;.whatis"&gt;</code>
			<code>   &lt;para&gt;</code>
			<code>      Django является видным представителем нового поколения</code>
			<code>      &lt;emphasis&gt;сред разработки&lt;/emphasis&gt;, но что же конкретно</code>
			<code>      подразумевают под этим термином?</code>
			<code>    &lt;/para&gt;</code>
			<code>  &lt;/section&gt;</code>
			<code>&lt;/chapter&gt;</code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Как бы нам переводить документацию Django?</h2>

		<ul>
			<li>Она хорошая.</li>
			<li>Её постоянно поддерживают и обвновляют.</li>
			<li>Sphinx уже делает всю сборку.</li>
			<li>Но есть проблема с обновлением перевода.</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Выход Sphinx 1.1</h2>

		<figure>
			<blockquote>
				<p>Added i18n support for content, a gettext builder and related utilities.</p>
			</blockquote>
			<figcaption>Release notes Sphinx 1.1 (Oct 9, 2011)</figcaption>
		</figure>
	</div></section>

	<section class="slide"><div>
		<h2>Sphinx</h2>

		<p>
			Инструмент для создания документации на reStructuredText. C открытым исходным кодом. BDS лицензия. Построен на базе Docutils для документирования Python.
		</p>

		<figure>
			<blockquote>
				<p>Cheers for a great tool that actually makes programmers <b>want</b> to write documentation!</p>
			</blockquote>
			<figcaption>What users say</figcaption>
		</figure>
	</div></section>

	<section class="slide"><div>
		<h2>reStructuredText</h2>

		<p>Облегчённый язык разметки. Используется в системе подготовки технической документации Docutils</p>

		<p>Описание <a href="http://sphinx-doc.org/rest.html">http://sphinx-doc.org/rest.html</a></p>
	</div></section>

	<section class="slide"><div>
		<pre style="margin-top: -80px; line-height: normal;">
			=====================================<br>
			Writing your first Django app, part 1<br>
			=====================================<br>
			<br>
			It'll consist of two parts:<br>
			<br>
			* A public site that lets people view polls and vote in them.<br>
			* An admin site that lets you add, change and delete polls.<br>
			<br>
			We'll assume you have :doc:`Django installed &lt;/intro/install&gt;` already. You can
			tell Django is installed and which version by running the following command:<br>
			<br>
			.. code-block:: bash<br>
			<br>
			&nbsp;&nbsp;&nbsp;&nbsp;python -c "import django; print(django.get_version())"
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Генерация в различные форматы</h2>

		<ul>
			<li>html, dirhtml, singlehtml</li>
			<li>PDF</li>
			<li>Plain text</li>
			<li>man page</li>
			<li>Epub</li>
			<li>и другие</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Документирование кода</h2>

		<pre style="font-size: 0.8em;">
			<code>.. py:function:: send_message(message, [priority=1])</code>
			<code></code>
			<code>   Send a message to a recipient</code>
			<code></code>
			<code>   :param str message: The body of the message</code>
			<code>   :param priority: The priority of the message, can be a number 1-5</code>
			<code>   :type priority: integer or None</code>
			<code>   :return: the message id</code>
			<code>   :raises ValueError: if the message exceeds 160 characters</code>
			<code>   :raises TypeError: if the message is not a basestrinдg</code>
   		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Поддержка различных языков программирования</h2>

		<ul>
			<li>Python</li>
			<li>C</li>
			<li>C++</li>
			<li>PHP</li>
			<li>Ruby</li>
			<li>JavaScript</li>
			<li>и другие</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Autodoc</h2>

		<p>Генерация опиcания кода из docstrings.</p>

		<pre>
			<code>.. automodule:: io</code>
			<code>   :members:</code>
		</pre>

		<p>Можно ссылаться на описание функций из внешней документации.</p>

		<pre>
			<code>:py:func:`io.open`</code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>sphinx-apidoc</h2>

		<p>Создает с нуля документацию API используя docstrings.</p>

		<pre style="font-size: 0.9em;">
			<code>$ sphinx-apidoc [options] -o outputdir packagedir [pathnames]</code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Еще фичи</h2>

		<ul>
			<li>Различные HTML темы</li>
			<li>Расширения</li>
			<li>Глоссарий</li>
			<li>Интернационализация</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Gettext</h2>

		Библиотека проекта GNU для интернационализации, широко применяемая в свободном ПО.
	</div></section>

	<section class="slide"><div>
		<img src="pictures/gettext.png" alt="" style="margin-top: -80px">
	</div></section>

	<section class="slide"><div>
		<pre>
			<code>print(_("Hello! My name is %s.") % name)</code>
			<code>&nbsp;</code>
		</pre>

		<pre>
			<code>#: src/main.py:36</code>
			<code>msgid "Hello! My name is %s."</code>
			<code>msgstr "Привет! Меня зовут %s."</code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<pre>
			<code>Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0</code>
			<code>: n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2)</code>
		</pre>

		<pre>
			<code>msgid "%d day ago"</code>
			<code>msgid_plural "%d days ago"</code>
			<code>msgstr[0] "%d день назад"</code>
			<code>msgstr[1] "%d дня назад"</code>
			<code>msgstr[2] "%d дней назад"</code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Процесс перевода</h2>

		<img src="pictures/translation.png" alt="">
	</div></section>

	<section class="slide"><div>
		<h2>Процесс обновления перевода с выходом новой версии Django</h2>

		<ul>
			<li>Обновляем исходники документации из официального репозитория.</li>
			<li>Обновляем файлы перевода средствами Sphinx.</li>
			<li>Исправляем перевод.</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Развитие инструмента для организации перевода</h2>

		<ul>
			<li>От пачки скриптов до CLI приложения</li>
			<li>Статистика перевода</li>
			<li>Список помощников</li>
			<li>Комментарии к тексту в документации</li>
			<li>Автоматизация обновления документации</li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Инструменты для перевода</h2>

		<ul>
			<li><a href="https://wiki.gnome.org/Apps/Gtranslator">Gtranslator</a></li>
			<li><a href="http://poedit.net/">Poedit</a></li>
			<li><a href="https://play.google.com/store/apps/details?id=ru.securelayer.rad.ando">Ando</a></li>
		</ul>
	</div></section>

	<section class="slide"><div>
		<h2>Transifex</h2>

		<p>
			Краудсорсинговая платформа для управления локализацией.
		</p>

		<p>
			<a href="https://www.transifex.com/">https://www.transifex.com/</a>
		</p>
	</div></section>

	<section class="slide"><div>
		<h2>Read the Docs</h2>

		<p>
			Хостинг документации для открытых проектов.<br>
			<a href="https://readthedocs.org/">https://readthedocs.org/</a>
		</p>

		<ul>
			<li>Поддержка документации на Sphinx</li>
			<li>Git, hg, bzr, svn</li>
			<li>Автообновление</li>
			<li>Версионность</li>
			<li>Генерация PDF</li>
		</ul>
	</div></section>

	<p class="badge"><a href="https://github.com/shower/shower">Fork me on Github</a></p>
	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"><div></div></div>
	<script src="shower/shower.min.js"></script>
	<!-- Copyright © 2014 Yours Truly, Famous Inc. -->
	<!-- Photos by John Carey, fiftyfootshadows.net -->
</body>
</html>